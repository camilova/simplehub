<li id="source-<%= source.id %>"
  data-parent="<%= "item-#{item.id}" %>">
  <div class="container-fluid p-0">
    <div class="row">
      <div class="col">
        <% case true %>
        <% when source.streaming? %>
          <%= fa_icon 'play', class: 'mr-1' %>
        <% when source.image? %>
          <%= fa_icon 'image', class: 'mr-1' %>
        <% else %>
          <%= fa_icon 'file', class: 'mr-1' %>
        <% end %>
        <% css = (source.deprecated?? 'text-line-through text-secondary' : '') %>
        <% if source.link.present? %>
          <%= link_to (source.title.presence || source.link), source.link,
            target: '_blank', class: css
          %>
        <% elsif source.resource.present? %>
          <%= link_to source.title, source_path(source), 
            class: css, 
            target: '_blank' %>
        <% else %>
          <span class="<%= css %>"><%= source.title %></span>
        <% end %>
      </div>
      <div class="col-auto">
        <div class="btn-group btn-group-sm" role="group" aria-label="View Source">
          <%= link_to edit_source_path(source, item: source.item.id),
            remote: true, 
            title: t('.edit'),
            class: "btn btn-light" do %>
            <%= fa_icon 'pencil' %>
          <% end %>
          <% if source.allow_download? %>
            <%= link_to download_source_path(source), 
              title: t('.download_resource'),
              class: "btn btn-light" do %>
              <%= fa_icon 'download' %>
            <% end %>
          <% end %>
          <%= link_to history_source_path(source), 
            title: t('.history'),
            class: "btn btn-light" do %>
            <%= fa_icon 'history' %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</li>