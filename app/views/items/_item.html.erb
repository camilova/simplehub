<% detail_div_id = "item_detail#{item.id}" %>
<li id="item-<%= item.id %>"
  class="list-group-item list-group-item-action px-2 px-md-4 pb-2 pt-1 pb-md-4 clickable item">
  <div class="row d-flex w-100 m-0 sticky-top bg-inherit py-1">
    <div class="col-12 col-md p-0 clickable order-1 order-md-0">
      <a
        id="item_details_header_<%= item.id %>"
        href="#<%= detail_div_id %>"
        data-toggle="collapse" role="button" 
        aria-expanded="false" aria-controls="Item Orders Details">
        <h5 class="mb-1 d-none d-md-inline"><%= item.title %></h5>
        <h6 class="mb-1 d-md-none"><%= item.title %></h6>
      </a>
    </div>
    <div class="col-auto py-0 pl-2 pr-0 ml-md-auto align-self-top no-wrap line-height-xs-0 line-height-md-normal">
      <% if @admin %>
        <small class="ml-2 no-wrap"><%= link_to t('.new_subitem'), new_item_path(item: item.id), remote: true %></small>
        <small class="mx-1">|</small>
        <small class="mr-2 no-wrap"><%= link_to t('.new_source'), new_source_path(item: item.id), remote: true %></small>
      <% end %>
      <span class="badge badge-primary badge-pill d-none d-md-inline-block"><%= item.active_sources_count %></span>
      <div class="btn-group btn-group-sm ml-2" role="group" aria-label="Controls of Theme">
        <% if @admin %>
          <%= link_to edit_item_path(item),
            remote: true, 
            title: t('.edit'),
            class: "btn btn-light" do %>
            <%= fa_icon 'pencil' %>
          <% end %>
          <%= link_to move_item_path(item, direction: 'up'),
            remote: true,
            method: :post,
            class: "btn btn-light" do %>
            <%= fa_icon 'arrow-up' %>
          <% end %>
          <%= link_to move_item_path(item, direction: 'down'),
            remote: true, 
            method: :post,
            class: "btn btn-light" do %>
            <%= fa_icon 'arrow-down' %>
          <% end %>
        <% end %>
      </div>
    </div>
    <div class="col-12 px-0 py-1 order-2">
      <p class="mb-1 clickable d-none d-md-inline"><%= item.description %></p>
      <p class="mb-1 clickable small d-md-none"><%= item.description %></p>
    </div>
  </div>
  <div class="collapse" id="<%= detail_div_id %>">
    <div class="card card-body p-1 p-md-2 p-xl-4">
      <ul class="sources-list list-group list-group-flush">
        <% item.sources.each do |source| %>
          <%= render partial: 'sources/source', locals: { source: source, item: item } %>
        <% end %>
      </ul>
      <ul class="list-group list-group-flush subitems-list">
        <% item.items.each do |subitem| %>
          <%= render partial: 'subitem', locals: { subitem: subitem } %>
        <% end %>
      </ul>
    </div>
  </div>
</li>